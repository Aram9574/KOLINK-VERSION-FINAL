/**
 * Unicode Character Maps for Bold and Italic
 */

const maps = {
    bold: {
        a: "ð—®",
        b: "ð—¯",
        c: "ð—°",
        d: "ð—±",
        e: "ð—²",
        f: "ð—³",
        g: "ð—´",
        h: "ð—µ",
        i: "ð—¶",
        j: "ð—·",
        k: "ð—¸",
        l: "ð—¹",
        m: "ð—º",
        n: "ð—»",
        o: "ð—¼",
        p: "ð—½",
        q: "ð—¾",
        r: "ð—¿",
        s: "ð˜€",
        t: "ð˜",
        u: "ð˜‚",
        v: "ð˜ƒ",
        w: "ð˜„",
        x: "ð˜…",
        y: "ð˜†",
        z: "ð˜‡",
        A: "ð—”",
        B: "ð—•",
        C: "ð—–",
        D: "ð——",
        E: "ð—˜",
        F: "ð—™",
        G: "ð—š",
        H: "ð—›",
        I: "ð—œ",
        J: "ð—",
        K: "ð—ž",
        L: "ð—Ÿ",
        M: "ð— ",
        N: "ð—¡",
        O: "ð—¢",
        P: "ð—£",
        Q: "ð—¤",
        R: "ð—¥",
        S: "ð—¦",
        T: "ð—§",
        U: "ð—¨",
        V: "ð—©",
        W: "ð—ª",
        X: "ð—«",
        Y: "ð—¬",
        Z: "ð—­",
        "0": "ðŸ¬",
        "1": "ðŸ­",
        "2": "ðŸ®",
        "3": "ðŸ¯",
        "4": "ðŸ°",
        "5": "ðŸ±",
        "6": "ðŸ²",
        "7": "ðŸ³",
        "8": "ðŸ´",
        "9": "ðŸµ",
    },
    italic: {
        a: "ð˜¢",
        b: "ð˜£",
        c: "ð˜¤",
        d: "ð˜¥",
        e: "ð˜¦",
        f: "ð˜§",
        g: "ð˜¨",
        h: "ð˜©",
        i: "ð˜ª",
        j: "ð˜«",
        k: "ð˜¬",
        l: "ð˜­",
        m: "ð˜®",
        n: "ð˜¯",
        o: "ð˜°",
        p: "ð˜±",
        q: "ð˜²",
        r: "ð˜³",
        s: "ð˜´",
        t: "ð˜µ",
        u: "ð˜¶",
        v: "ð˜·",
        w: "ð˜¸",
        x: "ð˜¹",
        y: "ð˜º",
        z: "ð˜»",
        A: "ð˜ˆ",
        B: "ð˜‰",
        C: "ð˜Š",
        D: "ð˜‹",
        E: "ð˜Œ",
        F: "ð˜",
        G: "ð˜Ž",
        H: "ð˜",
        I: "ð˜",
        J: "ð˜‘",
        K: "ð˜’",
        L: "ð˜“",
        M: "ð˜”",
        N: "ð˜•",
        O: "ð˜–",
        P: "ð˜—",
        Q: "ð˜˜",
        R: "ð˜™",
        S: "ð˜š",
        T: "ð˜›",
        U: "ð˜œ",
        V: "ð˜",
        W: "ð˜ž",
        X: "ð˜Ÿ",
        Y: "ð˜ ",
        Z: "ð˜¡",
    },
    monospace: {
        a: "ðšŠ",
        b: "ðš‹",
        c: "ðšŒ",
        d: "ðš",
        e: "ðšŽ",
        f: "ðš",
        g: "ðš",
        h: "ðš‘",
        i: "ðš’",
        j: "ðš“",
        k: "ðš”",
        l: "ðš•",
        m: "ðš–",
        n: "ðš—",
        o: "ðš˜",
        p: "ðš™",
        q: "ðšš",
        r: "ðš›",
        s: "ðšœ",
        t: "ðš",
        u: "ðšž",
        v: "ðšŸ",
        w: "ðš ",
        x: "ðš¡",
        y: "ðš¢",
        z: "ðš£",
        A: "ð™°",
        B: "ð™±",
        C: "ð™²",
        D: "ð™³",
        E: "ð™´",
        F: "ð™µ",
        G: "ð™¶",
        H: "ð™·",
        I: "ð™¸",
        J: "ð™¹",
        K: "ð™º",
        L: "ð™»",
        M: "ð™¼",
        N: "ð™½",
        O: "ð™¾",
        P: "ð™¿",
        Q: "ðš€",
        R: "ðš",
        S: "ðš‚",
        T: "ðšƒ",
        U: "ðš„",
        V: "ðš…",
        W: "ðš†",
        X: "ðš‡",
        Y: "ðšˆ",
        Z: "ðš‰",
        "0": "ðŸ¶",
        "1": "ðŸ·",
        "2": "ðŸ¸",
        "3": "ðŸ¹",
        "4": "ðŸº",
        "5": "ðŸ»",
        "6": "ðŸ¼",
        "7": "ðŸ½",
        "8": "ðŸ¾",
        "9": "ðŸ¿",
    },
};

type FormatType = "bold" | "italic" | "strike" | "underline" | "code";

export const convertToUnicode = (text: string, type: FormatType): string => {
    if (type === "strike") {
        return text.split("").map((char) => char + "\u0336").join("");
    }
    if (type === "underline") {
        return text.split("").map((char) => char + "\u0332").join("");
    }
    return text.split("").map((char) => {
        // @ts-ignore
        return (maps[type === "code" ? "monospace" : type] as any)?.[char] ||
            char;
    }).join("");
};

export const clearUnicodeFormatting = (text: string): string => {
    // 1. Remove combining marks (strike/underline)
    let result = text.replace(/[\u0336\u0332]/g, "");

    // 2. Reverse map for bold/italic/monospace
    const allChars = { ...maps.bold, ...maps.italic, ...maps.monospace };
    const reverseMap: Record<string, string> = {};

    Object.entries(allChars).forEach(([key, value]) => {
        reverseMap[value] = key;
    });

    return result.split("").map((char) => reverseMap[char] || char).join("");
};
